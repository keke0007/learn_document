<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>函数基础</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border-left: 4px solid #4CAF50;
            border-radius: 5px;
        }
        h2 {
            color: #555;
            margin-bottom: 15px;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .output {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
            font-family: 'Courier New', monospace;
        }
        input {
            padding: 8px;
            margin: 5px;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>函数基础</h1>
        
        <div class="section">
            <h2>1. 函数声明</h2>
            <div class="code-block">
// 函数声明
function greet(name) {
    return "Hello, " + name + "!";
}

// 调用函数
greet("张三");  // "Hello, 张三!"
            </div>
            <input type="text" id="name-input" placeholder="输入姓名" value="张三">
            <button onclick="demoFunctionDeclaration()">运行示例</button>
            <div id="declaration-output" class="output"></div>
        </div>
        
        <div class="section">
            <h2>2. 函数表达式</h2>
            <div class="code-block">
// 函数表达式
const add = function(a, b) {
    return a + b;
};

// 调用
add(5, 3);  // 8
            </div>
            <input type="number" id="num1" placeholder="数字1" value="5">
            <input type="number" id="num2" placeholder="数字2" value="3">
            <button onclick="demoFunctionExpression()">运行示例</button>
            <div id="expression-output" class="output"></div>
        </div>
        
        <div class="section">
            <h2>3. 函数参数</h2>
            <div class="code-block">
// 带参数的函数
function multiply(a, b) {
    return a * b;
}

// 默认参数（ES6）
function greet(name = "Guest") {
    return "Hello, " + name + "!";
}

// 剩余参数
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}
            </div>
            <button onclick="demoParameters()">运行示例</button>
            <div id="parameters-output" class="output"></div>
        </div>
        
        <div class="section">
            <h2>4. 返回值</h2>
            <div class="code-block">
// 有返回值的函数
function calculate(a, b) {
    return a + b;
}

// 没有返回值的函数（返回 undefined）
function logMessage(message) {
    console.log(message);
    // 没有 return 语句
}
            </div>
            <button onclick="demoReturn()">运行示例</button>
            <div id="return-output" class="output"></div>
        </div>
        
        <div class="section">
            <h2>5. 作用域</h2>
            <div class="code-block">
// 全局变量
let globalVar = "全局变量";

function testScope() {
    // 局部变量
    let localVar = "局部变量";
    console.log(globalVar);  // 可以访问全局变量
    console.log(localVar);    // 可以访问局部变量
}

// console.log(localVar);  // 错误：无法访问局部变量
            </div>
            <button onclick="demoScope()">运行示例</button>
            <div id="scope-output" class="output"></div>
        </div>
        
        <div class="section">
            <h2>6. 立即执行函数（IIFE）</h2>
            <div class="code-block">
// 立即执行函数表达式
(function() {
    console.log("立即执行");
})();

// 带参数的 IIFE
(function(name) {
    console.log("Hello, " + name);
})("张三");
            </div>
            <button onclick="demoIIFE()">运行示例</button>
            <div id="iife-output" class="output"></div>
        </div>
        
        <div class="section">
            <h2>7. 递归函数</h2>
            <div class="code-block">
// 计算阶乘
function factorial(n) {
    if (n <= 1) {
        return 1;
    }
    return n * factorial(n - 1);
}

factorial(5);  // 120
            </div>
            <input type="number" id="factorial-input" placeholder="输入数字" value="5" min="1" max="10">
            <button onclick="demoRecursion()">计算阶乘</button>
            <div id="recursion-output" class="output"></div>
        </div>
        
        <div class="section">
            <h2>8. 高阶函数</h2>
            <div class="code-block">
// 函数作为参数
function operate(a, b, operation) {
    return operation(a, b);
}

function add(x, y) { return x + y; }
function multiply(x, y) { return x * y; }

operate(5, 3, add);        // 8
operate(5, 3, multiply);    // 15
            </div>
            <button onclick="demoHigherOrder()">运行示例</button>
            <div id="higher-order-output" class="output"></div>
        </div>
    </div>

    <script>
        // 1. 函数声明
        function greet(name) {
            return "Hello, " + name + "!";
        }
        
        function demoFunctionDeclaration() {
            let name = document.getElementById('name-input').value || "Guest";
            let result = greet(name);
            document.getElementById('declaration-output').innerHTML = 
                "函数调用: greet('" + name + "')<br>" +
                "结果: " + result;
        }
        
        // 2. 函数表达式
        const add = function(a, b) {
            return a + b;
        };
        
        function demoFunctionExpression() {
            let num1 = parseFloat(document.getElementById('num1').value) || 0;
            let num2 = parseFloat(document.getElementById('num2').value) || 0;
            let result = add(num1, num2);
            document.getElementById('expression-output').innerHTML = 
                "函数调用: add(" + num1 + ", " + num2 + ")<br>" +
                "结果: " + result;
        }
        
        // 3. 函数参数
        function multiply(a, b) {
            return a * b;
        }
        
        function greetWithDefault(name = "Guest") {
            return "Hello, " + name + "!";
        }
        
        function sum(...numbers) {
            return numbers.reduce((a, b) => a + b, 0);
        }
        
        function demoParameters() {
            let output = "";
            output += "multiply(5, 3): " + multiply(5, 3) + "<br>";
            output += "greetWithDefault('张三'): " + greetWithDefault("张三") + "<br>";
            output += "greetWithDefault(): " + greetWithDefault() + "<br>";
            output += "sum(1, 2, 3, 4, 5): " + sum(1, 2, 3, 4, 5) + "<br>";
            document.getElementById('parameters-output').innerHTML = output;
        }
        
        // 4. 返回值
        function calculate(a, b) {
            return a + b;
        }
        
        function logMessage(message) {
            console.log(message);
            // 没有 return，返回 undefined
        }
        
        function demoReturn() {
            let output = "";
            output += "calculate(5, 3): " + calculate(5, 3) + "<br>";
            output += "logMessage('test'): " + logMessage("test") + " (undefined)<br>";
            document.getElementById('return-output').innerHTML = output;
        }
        
        // 5. 作用域
        let globalVar = "全局变量";
        
        function testScope() {
            let localVar = "局部变量";
            return "全局变量: " + globalVar + "<br>局部变量: " + localVar;
        }
        
        function demoScope() {
            let output = testScope();
            output += "<br>注意：局部变量在函数外部无法访问";
            document.getElementById('scope-output').innerHTML = output;
        }
        
        // 6. IIFE
        function demoIIFE() {
            let output = "";
            (function() {
                output += "立即执行函数 1 执行了<br>";
            })();
            
            (function(name) {
                output += "立即执行函数 2: Hello, " + name + "<br>";
            })("张三");
            
            document.getElementById('iife-output').innerHTML = output;
        }
        
        // 7. 递归函数
        function factorial(n) {
            if (n <= 1) {
                return 1;
            }
            return n * factorial(n - 1);
        }
        
        function demoRecursion() {
            let n = parseInt(document.getElementById('factorial-input').value) || 5;
            if (n < 1 || n > 10) {
                document.getElementById('recursion-output').innerHTML = "请输入 1-10 之间的数字";
                return;
            }
            let result = factorial(n);
            document.getElementById('recursion-output').innerHTML = 
                "factorial(" + n + ") = " + result + "<br>" +
                "计算过程: " + n + "! = " + n + " × " + (n-1) + "! = " + result;
        }
        
        // 8. 高阶函数
        function operate(a, b, operation) {
            return operation(a, b);
        }
        
        function addFunc(x, y) { return x + y; }
        function multiplyFunc(x, y) { return x * y; }
        
        function demoHigherOrder() {
            let output = "";
            output += "operate(5, 3, add): " + operate(5, 3, addFunc) + "<br>";
            output += "operate(5, 3, multiply): " + operate(5, 3, multiplyFunc) + "<br>";
            document.getElementById('higher-order-output').innerHTML = output;
        }
        
        console.log("=== 函数基础示例 ===");
    </script>
</body>
</html>
