# Shell 学习指南

## 📚 项目概述

本指南提供了完整的 Shell 脚本学习资源，包括基础知识、实战案例和验证数据，帮助你系统掌握 Shell 脚本编程技术。

---

## 📁 项目结构

```
shell/
├── README.md                    # Shell 知识点总览（详细文档）
├── GUIDE.md                     # 本指南文档（快速入门）
├── cases/                       # 实战案例目录
│   ├── basic_syntax.md         # 案例1：基础语法
│   ├── file_operations.md      # 案例2：文件操作
│   ├── text_processing.md      # 案例3：文本处理
│   └── system_management.md    # 案例4：系统管理
├── data/                        # 验证数据目录
│   ├── numbers.txt             # 数字数据
│   ├── names.txt               # 姓名数据
│   ├── employees.txt           # 员工数据
│   ├── departments.txt         # 部门数据
│   ├── log.txt                 # 日志数据
│   └── data.csv                # CSV数据
└── scripts/                     # 脚本目录（可选）
```

---

## 🎯 学习路径

### 阶段一：Shell 基础（2-3天）
1. **Shell 基础概念**
   - 了解 Shell 的作用和类型
   - 理解 Shell 脚本的基本结构
   - 掌握脚本的执行方式

2. **变量和数组**
   - 变量定义和使用
   - 特殊变量
   - 数组操作

### 阶段二：控制结构（2-3天）
1. **条件判断**
   - if-else 语句
   - case 语句
   - 条件测试

2. **循环结构**
   - for 循环
   - while 循环
   - until 循环
   - 循环控制

### 阶段三：函数和文件（2-3天）
1. **函数**
   - 函数定义和调用
   - 函数参数
   - 函数返回值

2. **文件操作**
   - 文件读取和写入
   - 文件操作命令
   - 文件处理

### 阶段四：文本处理和系统管理（3-4天）
1. **文本处理**
   - grep、sed、awk
   - cut、sort、uniq
   - 正则表达式

2. **系统管理**
   - 进程管理
   - 系统监控
   - 定时任务

---

## 🚀 快速开始

### 前置要求

- Linux/Unix 系统或 WSL（Windows Subsystem for Linux）
- Bash Shell（大多数 Linux 系统默认）
- 文本编辑器（vim、nano、VS Code 等）

### 步骤1：创建脚本文件

```bash
# 创建脚本文件
vim hello.sh

# 添加内容
#!/bin/bash
echo "Hello World"
```

### 步骤2：添加执行权限

```bash
chmod +x hello.sh
```

### 步骤3：运行脚本

```bash
# 方式1：直接执行
./hello.sh

# 方式2：使用 bash
bash hello.sh

# 方式3：使用 sh
sh hello.sh
```

---

## 📖 核心知识点速查

### 1. 变量操作

| 操作 | 语法 | 说明 |
|------|------|------|
| **定义变量** | `var="value"` | 定义变量 |
| **使用变量** | `$var` 或 `${var}` | 使用变量 |
| **只读变量** | `readonly var="value"` | 只读变量 |
| **删除变量** | `unset var` | 删除变量 |
| **环境变量** | `export var="value"` | 环境变量 |

### 2. 条件判断

| 测试 | 语法 | 说明 |
|------|------|------|
| **文件存在** | `[ -f file ]` | 文件存在且为普通文件 |
| **目录存在** | `[ -d dir ]` | 目录存在 |
| **字符串相等** | `[ str1 = str2 ]` | 字符串相等 |
| **数值比较** | `[ n1 -eq n2 ]` | 数值相等 |
| **逻辑与** | `[ cond1 ] && [ cond2 ]` | 逻辑与 |
| **逻辑或** | `[ cond1 ] \|\| [ cond2 ]` | 逻辑或 |

### 3. 循环结构

| 循环类型 | 语法 | 说明 |
|---------|------|------|
| **for 列表** | `for i in list; do ... done` | 列表循环 |
| **for C风格** | `for ((i=1; i<=5; i++)); do ... done` | C风格循环 |
| **while** | `while [ cond ]; do ... done` | while循环 |
| **until** | `until [ cond ]; do ... done` | until循环 |

### 4. 文本处理工具

| 工具 | 常用命令 | 说明 |
|------|---------|------|
| **grep** | `grep pattern file` | 搜索文本 |
| **sed** | `sed 's/old/new/g' file` | 流编辑器 |
| **awk** | `awk '{print $1}' file` | 文本处理 |
| **cut** | `cut -d: -f1 file` | 列提取 |

---

## 💡 实战案例概览

### 案例1：基础语法
**学习目标**：掌握 Shell 脚本的基础语法

**涉及知识点**：
- 变量定义和使用
- 数组操作
- 条件判断（if-else、case）
- 循环结构（for、while、until）
- 函数定义和调用

**数据规模**：
- 数字文件：5 行
- 姓名文件：4 行

**典型操作**：
- 变量操作
- 数组遍历
- 条件判断
- 循环控制

### 案例2：文件操作
**学习目标**：掌握文件操作

**涉及知识点**：
- 文件读取（逐行、整体）
- 文件写入（覆盖、追加）
- 文件操作命令（cp、mv、rm）
- 文件处理（grep、sort）

**数据规模**：
- 员工表：5 条记录
- 部门表：3 条记录

**典型操作**：
- 读取CSV文件
- 文件复制和移动
- 文件过滤和排序

### 案例3：文本处理
**学习目标**：掌握文本处理工具

**涉及知识点**：
- grep 搜索和过滤
- sed 替换和编辑
- awk 列处理和计算
- cut 列提取
- 组合使用

**数据规模**：
- 日志文件：7 条记录
- CSV文件：6 条记录

**典型操作**：
- 日志分析
- 数据统计
- 报告生成

### 案例4：系统管理
**学习目标**：系统管理应用

**涉及知识点**：
- 进程管理
- 系统监控
- 文件系统操作
- 日志管理
- 定时任务

**数据规模**：
- 使用系统实际数据

**典型操作**：
- 进程监控
- 系统资源监控
- 日志轮转和分析
- 定时任务配置

---

## 📊 数据说明

### 数据文件格式

| 文件名 | 格式 | 记录数 | 用途 | 案例 |
|--------|------|--------|------|------|
| numbers.txt | 文本 | 5 行 | 数字数据 | 案例1 |
| names.txt | 文本 | 4 行 | 姓名数据 | 案例1 |
| employees.txt | CSV | 5 | 员工信息 | 案例2 |
| departments.txt | CSV | 3 | 部门信息 | 案例2 |
| log.txt | 文本 | 7 行 | 日志数据 | 案例3 |
| data.csv | CSV | 6 | CSV数据 | 案例3 |

### 数据字段说明

**employees.txt** 字段：
- id, name, age, salary, department

**departments.txt** 字段：
- dept_id, dept_name, location

**log.txt** 格式：
- timestamp, level, message

**data.csv** 字段：
- id, name, age, salary, department

---

## 🔧 使用技巧

### 1. 脚本调试

```bash
# 显示执行的命令
bash -x script.sh

# 在脚本中启用调试
set -x
# 代码
set +x
```

### 2. 错误处理

```bash
# 遇到错误立即退出
set -e

# 使用未定义变量时报错
set -u

# 管道中任何命令失败都返回失败
set -o pipefail
```

### 3. 常见问题

**问题1：权限 denied**
```bash
# 添加执行权限
chmod +x script.sh
```

**问题2：命令未找到**
```bash
# 检查命令路径
which command

# 使用完整路径
/usr/bin/command
```

**问题3：变量未定义**
```bash
# 使用默认值
${var:-default}

# 检查变量是否定义
if [ -z "$var" ]; then
    echo "变量未定义"
fi
```

---

## 📝 学习建议

### 初学者
1. 从基础语法开始，逐步学习
2. 多动手实践，编写简单脚本
3. 理解每个命令的作用
4. 学会查看命令帮助（man、--help）

### 进阶学习
1. 学习文本处理工具（grep、sed、awk）
2. 掌握正则表达式
3. 学习系统管理脚本
4. 理解 Shell 脚本的最佳实践

### 实践建议
1. **动手实践**：不要只看文档，要实际编写和运行脚本
2. **理解原理**：了解每个命令的工作原理
3. **错误处理**：学会处理错误和异常情况
4. **代码规范**：遵循 Shell 脚本编程规范

---

## 🔗 相关资源

### 官方文档
- [GNU Bash 手册](https://www.gnu.org/software/bash/manual/)
- [Advanced Bash-Scripting Guide](https://tldp.org/LDP/abs/html/)

### 推荐阅读
- `README.md` - 详细的知识点文档
- `cases/` - 四个实战案例的详细说明
- Shell 脚本编程最佳实践

### 扩展学习
- 正则表达式深入
- Shell 脚本性能优化
- 自动化运维脚本
- 系统监控脚本

---

## ✅ 学习检查清单

完成以下任务，确保掌握 Shell 脚本核心技能：

### 基础操作
- [ ] 能够定义和使用变量
- [ ] 能够使用数组
- [ ] 能够编写条件判断
- [ ] 能够编写循环结构

### 进阶操作
- [ ] 能够定义和调用函数
- [ ] 能够进行文件操作
- [ ] 能够使用文本处理工具
- [ ] 能够处理错误和异常

### 实战能力
- [ ] 完成案例1的所有脚本
- [ ] 完成案例2的所有脚本
- [ ] 完成案例3的所有脚本
- [ ] 完成案例4的所有脚本
- [ ] 能够独立编写实用脚本

---

## 🎓 学习成果

完成本指南的学习后，你将能够：
- ✅ 熟练编写 Shell 脚本
- ✅ 掌握变量、数组、函数的使用
- ✅ 能够进行文件操作和文本处理
- ✅ 理解 Shell 脚本的错误处理
- ✅ 具备编写系统管理脚本的能力
- ✅ 掌握 Shell 脚本的最佳实践

**祝你学习愉快！** 🚀

---

## 📌 快速参考

### 常用命令

```bash
# 查看命令帮助
man command
command --help

# 查看脚本语法
bash -n script.sh

# 调试脚本
bash -x script.sh

# 设置变量
export VAR="value"

# 查看环境变量
env
printenv
```

### 常用快捷键

- `Ctrl+C`：中断当前命令
- `Ctrl+D`：退出 Shell
- `Ctrl+L`：清屏
- `Ctrl+R`：搜索历史命令
- `!!`：执行上一条命令
