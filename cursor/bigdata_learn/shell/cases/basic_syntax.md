# 案例1：基础语法

## 案例描述
学习 Shell 脚本的基础语法，包括变量、数组、条件判断和循环。

## 数据准备

### 数据文件 (numbers.txt)
```
1
2
3
4
5
```

### 数据文件 (names.txt)
```
张三
李四
王五
赵六
```

## 脚本示例

### 1. 变量操作 (variables.sh)
```bash
#!/bin/bash

# ============================================
# 变量定义和使用
# ============================================

# 定义变量
name="张三"
age=25
city="北京"

echo "姓名: $name"
echo "年龄: $age"
echo "城市: $city"

# 使用 ${} 语法
echo "姓名: ${name}"

# 字符串拼接
full_info="${name}, ${age}岁, 来自${city}"
echo "完整信息: $full_info"

# ============================================
# 特殊变量
# ============================================

echo "脚本名称: $0"
echo "参数个数: $#"
echo "所有参数: $*"
echo "第一个参数: $1"
echo "第二个参数: $2"

# ============================================
# 只读变量
# ============================================

readonly PI=3.14159
echo "PI = $PI"

# ============================================
# 环境变量
# ============================================

echo "当前用户: $USER"
echo "当前目录: $PWD"
echo "主目录: $HOME"
echo "PATH: $PATH"
```

### 2. 数组操作 (arrays.sh)
```bash
#!/bin/bash

# ============================================
# 数组定义
# ============================================

# 方式1：直接定义
arr1=(1 2 3 4 5)
echo "数组1: ${arr1[@]}"

# 方式2：逐个赋值
arr2[0]="苹果"
arr2[1]="香蕉"
arr2[2]="橙子"
echo "数组2: ${arr2[@]}"

# ============================================
# 数组访问
# ============================================

echo "第一个元素: ${arr1[0]}"
echo "所有元素: ${arr1[@]}"
echo "数组长度: ${#arr1[@]}"

# ============================================
# 数组遍历
# ============================================

echo "遍历数组1:"
for i in ${arr1[@]}; do
    echo "  $i"
done

echo "遍历数组2:"
for i in "${arr2[@]}"; do
    echo "  $i"
done

# ============================================
# 数组切片
# ============================================

echo "前3个元素: ${arr1[@]:0:3}"
echo "从索引2开始: ${arr1[@]:2}"
```

### 3. 条件判断 (conditionals.sh)
```bash
#!/bin/bash

# ============================================
# if-else 语句
# ============================================

age=25

if [ $age -lt 18 ]; then
    echo "未成年"
elif [ $age -lt 60 ]; then
    echo "成年人"
else
    echo "老年人"
fi

# ============================================
# 字符串比较
# ============================================

name="张三"

if [ "$name" = "张三" ]; then
    echo "姓名匹配"
fi

if [ -n "$name" ]; then
    echo "姓名不为空"
fi

# ============================================
# 文件测试
# ============================================

file="data/numbers.txt"

if [ -f "$file" ]; then
    echo "文件存在: $file"
    if [ -r "$file" ]; then
        echo "文件可读"
    fi
else
    echo "文件不存在: $file"
fi

# ============================================
# case 语句
# ============================================

day="Monday"

case $day in
    Monday|Tuesday|Wednesday|Thursday|Friday)
        echo "工作日"
        ;;
    Saturday|Sunday)
        echo "周末"
        ;;
    *)
        echo "未知"
        ;;
esac
```

### 4. 循环结构 (loops.sh)
```bash
#!/bin/bash

# ============================================
# for 循环 - 列表
# ============================================

echo "=== for 循环 - 列表 ==="
for i in 1 2 3 4 5; do
    echo "数字: $i"
done

# ============================================
# for 循环 - C 风格
# ============================================

echo "=== for 循环 - C 风格 ==="
for ((i=1; i<=5; i++)); do
    echo "数字: $i"
done

# ============================================
# for 循环 - 遍历文件
# ============================================

echo "=== 遍历文件内容 ==="
for line in $(cat data/numbers.txt); do
    echo "行内容: $line"
done

# ============================================
# while 循环
# ============================================

echo "=== while 循环 ==="
count=1
while [ $count -le 5 ]; do
    echo "计数: $count"
    count=$((count + 1))
done

# ============================================
# while 循环 - 读取文件
# ============================================

echo "=== while 循环读取文件 ==="
while IFS= read -r line; do
    echo "读取: $line"
done < data/numbers.txt

# ============================================
# until 循环
# ============================================

echo "=== until 循环 ==="
count=1
until [ $count -gt 5 ]; do
    echo "计数: $count"
    count=$((count + 1))
done

# ============================================
# 循环控制
# ============================================

echo "=== break 示例 ==="
for i in {1..10}; do
    if [ $i -eq 6 ]; then
        break
    fi
    echo "数字: $i"
done

echo "=== continue 示例 ==="
for i in {1..10}; do
    if [ $i -eq 5 ]; then
        continue
    fi
    echo "数字: $i"
done
```

### 5. 函数 (functions.sh)
```bash
#!/bin/bash

# ============================================
# 函数定义和调用
# ============================================

greet() {
    echo "Hello, $1!"
}

greet "张三"
greet "李四"

# ============================================
# 函数返回值
# ============================================

add() {
    local sum=$(($1 + $2))
    return $sum
}

add 10 20
result=$?
echo "10 + 20 = $result"

# ============================================
# 函数返回字符串
# ============================================

get_full_name() {
    local first=$1
    local last=$2
    echo "${first} ${last}"
}

full_name=$(get_full_name "张" "三")
echo "全名: $full_name"

# ============================================
# 函数参数
# ============================================

print_info() {
    echo "参数个数: $#"
    echo "第一个参数: $1"
    echo "第二个参数: $2"
    echo "所有参数: $@"
}

print_info "参数1" "参数2" "参数3"

# ============================================
# 局部变量
# ============================================

test_local() {
    local var="局部变量"
    echo "函数内: $var"
}

var="全局变量"
echo "函数前: $var"
test_local
echo "函数后: $var"
```

## 运行方式

```bash
# 添加执行权限
chmod +x variables.sh arrays.sh conditionals.sh loops.sh functions.sh

# 运行脚本
./variables.sh
./arrays.sh
./conditionals.sh
./loops.sh
./functions.sh
```

## 预期结果

### 变量操作输出
```
姓名: 张三
年龄: 25
城市: 北京
完整信息: 张三, 25岁, 来自北京
```

### 数组操作输出
```
数组1: 1 2 3 4 5
数组2: 苹果 香蕉 橙子
第一个元素: 1
数组长度: 5
```

### 条件判断输出
```
成年人
姓名匹配
文件存在: data/numbers.txt
工作日
```

## 学习要点

1. **变量**：定义、使用、特殊变量
2. **数组**：定义、访问、遍历、切片
3. **条件判断**：if-else、case、文件测试
4. **循环**：for、while、until、循环控制
5. **函数**：定义、调用、参数、返回值
