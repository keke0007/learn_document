# Java 服务 Linux 环境 DevOps 开发部署知识点总览

## 📚 目录

1. [Linux 基础](#1-linux-基础)
2. [Java 服务部署](#2-java-服务部署)
3. [Docker 和 Kubernetes](#3-docker-和-kubernetes)
4. [CI/CD 流水线](#4-cicd-流水线)
5. [监控和日志](#5-监控和日志)
6. [自动化运维](#6-自动化运维)
7. [安全实践](#7-安全实践)
8. [故障处理](#8-故障处理)

---

## 1. Linux 基础

### 1.1 系统管理

**文件系统操作**
- 文件查看和编辑
- 权限管理（chmod、chown）
- 磁盘管理（df、du）
- 文件查找（find、locate）

**进程管理**
- 进程查看（ps、top、htop）
- 进程控制（kill、killall）
- 后台任务（nohup、screen、tmux）

**服务管理**
- systemd 服务
- 服务启动和停止
- 服务状态查看
- 日志查看（journalctl）

### 1.2 Shell 脚本

**Bash 基础**
- 变量和数组
- 条件判断
- 循环控制
- 函数定义

**脚本编写**
- 错误处理
- 日志记录
- 参数传递
- 返回值处理

---

## 2. Java 服务部署

### 2.1 JVM 参数调优

**堆内存设置**
- -Xms：初始堆大小
- -Xmx：最大堆大小
- 合理设置避免频繁 GC

**GC 选择**
- G1 GC：适合大堆内存
- Parallel GC：适合吞吐量优先
- CMS GC：适合低延迟

**性能优化**
- GC 日志分析
- 内存溢出处理
- JIT 编译优化

### 2.2 服务管理

**启动脚本**
- 环境变量设置
- JVM 参数配置
- 日志输出
- 后台运行

**健康检查**
- 启动检查
- 运行检查
- 优雅停止

**配置管理**
- 环境变量
- 配置文件
- 密钥管理

---

## 3. Docker 和 Kubernetes

### 3.1 Docker

**Dockerfile**
- 基础镜像选择
- 多阶段构建
- 非 root 用户
- 健康检查

**Docker Compose**
- 服务编排
- 网络配置
- 数据卷管理
- 依赖管理

### 3.2 Kubernetes

**核心概念**
- Pod：最小部署单元
- Deployment：部署管理
- Service：服务发现
- ConfigMap/Secret：配置管理

**部署实践**
- 资源限制
- 探针配置
- 滚动更新
- HPA 自动扩展

---

## 4. CI/CD 流水线

### 4.1 流水线设计

**构建阶段**
- 代码检出
- 依赖安装
- 代码编译
- 单元测试

**测试阶段**
- 单元测试
- 集成测试
- 代码质量检查
- 安全扫描

**部署阶段**
- 镜像构建
- 镜像推送
- 环境部署
- 健康检查

### 4.2 部署策略

**蓝绿部署**
- 零停机部署
- 快速回滚
- 资源占用高

**滚动更新**
- 逐步替换
- 资源占用低
- 需要兼容性

**金丝雀发布**
- 小流量验证
- 风险控制
- 逐步推广

---

## 5. 监控和日志

### 5.1 监控系统

**Prometheus**
- 指标收集
- 时间序列数据库
- 查询语言（PromQL）
- 告警规则

**Grafana**
- 仪表板设计
- 可视化展示
- 告警通知
- 数据源集成

### 5.2 日志管理

**ELK Stack**
- Elasticsearch：存储和搜索
- Logstash：日志处理
- Kibana：可视化

**日志收集**
- 文件日志
- 应用日志
- 系统日志
- 容器日志

---

## 6. 自动化运维

### 6.1 配置管理

**Ansible**
- Playbook 编写
- 批量操作
- 配置同步
- 幂等性

**基础设施即代码**
- Terraform
- 资源管理
- 环境一致性
- 版本控制

### 6.2 自动化脚本

**部署脚本**
- 版本管理
- 备份恢复
- 回滚机制

**维护脚本**
- 日志清理
- 备份管理
- 健康检查

---

## 7. 安全实践

### 7.1 访问控制

**用户权限**
- 最小权限原则
- 密钥管理
- SSH 配置

**网络安全**
- 防火墙规则
- 安全组配置
- VPN 访问

### 7.2 数据安全

**加密**
- 传输加密（TLS/SSL）
- 存储加密
- 密钥管理

**备份**
- 定期备份
- 备份验证
- 灾难恢复

---

## 8. 故障处理

### 8.1 故障排查

**日志分析**
- 应用日志
- 系统日志
- 容器日志

**性能分析**
- CPU 分析
- 内存分析
- 网络分析

### 8.2 应急响应

**故障处理流程**
- 问题定位
- 影响评估
- 解决方案
- 恢复验证

**回滚策略**
- 自动回滚
- 手动回滚
- 数据恢复

---

## 📊 面试重点总结

### 高频面试题

1. **Linux 系统管理**
   - 进程管理
   - 服务管理
   - 网络配置
   - 权限管理

2. **Java 部署**
   - JVM 参数调优
   - 服务启动脚本
   - 健康检查
   - 性能优化

3. **容器化**
   - Dockerfile 编写
   - Docker Compose
   - Kubernetes 部署
   - 服务编排

4. **CI/CD**
   - 流水线设计
   - 自动化部署
   - 回滚策略
   - 环境管理

5. **监控和日志**
   - 监控指标
   - 告警配置
   - 日志收集
   - 性能分析

### 手写代码题

1. **部署脚本**
   - 服务启动脚本
   - 健康检查脚本
   - 回滚脚本

2. **Dockerfile**
   - 多阶段构建
   - 优化镜像大小
   - 安全配置

3. **Kubernetes 配置**
   - Deployment
   - Service
   - ConfigMap/Secret

---

**最后更新：2026-01-26**
