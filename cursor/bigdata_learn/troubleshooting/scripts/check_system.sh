#!/bin/bash

echo "=== 系统资源检查 ==="

# ============================================
# 1. CPU 信息
# ============================================

echo -e "\n1. CPU 信息"
echo "CPU 核心数: $(nproc)"
echo "CPU 使用率:"
top -b -n 1 | grep "Cpu(s)" | awk '{print $2}'

# ============================================
# 2. 内存信息
# ============================================

echo -e "\n2. 内存信息"
free -h

# ============================================
# 3. 磁盘信息
# ============================================

echo -e "\n3. 磁盘使用"
df -h

# ============================================
# 4. 负载信息
# ============================================

echo -e "\n4. 系统负载"
uptime

# ============================================
# 5. 网络连接
# ============================================

echo -e "\n5. 网络连接统计"
ss -s

# ============================================
# 6. 进程统计
# ============================================

echo -e "\n6. 进程统计"
echo "总进程数: $(ps aux | wc -l)"
echo "Java 进程数: $(ps aux | grep java | grep -v grep | wc -l)"

# ============================================
# 7. 文件描述符
# ============================================

echo -e "\n7. 文件描述符"
echo "系统限制: $(ulimit -n)"
echo "当前使用: $(lsof 2>/dev/null | wc -l)"
